<link rel="import" href="../bower_components/polymer/polymer.html">
<dom-module id="ws-element">

  <template>

  </template>
</dom-module>
<script type="text/javascript">
    class XCustom extends Polymer.Element {

        static get is() {return 'ws-element'}
        static get properties() {
            return {
                url: {
                    type: String
                },
            }
        }



        ready () {
            this.socket = new WebSocket(this.url);
            this.socket.onerror = this.onError.bind(this);
            this.socket.onopen = this.onOpen.bind(this);
            this.socket.onmessage = this.onMessage.bind(this);
        }
        onError (error) {
             console.log("error");
        }
        onOpen (event) {
            console.log("Open ws connection ");
            this.dispatchEvent(new CustomEvent('kick', {detail: {kicked: true}}));
        }
        onMessage (event) {
            console.log(event.data);
        }
        send (message) {
            this.socket.send(message);
        }
        close () {
            this.socket.close();
        }

        handleClick(e) {
            this.dispatchEvent(new CustomEvent('kick', {detail: {kicked: true}}));
        }
    }
    customElements.define(XCustom.is, XCustom);
</script>